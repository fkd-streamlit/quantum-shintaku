# 量子神託（試作）— 縁の球体（QUBO × アート）

3D球体上でキーワードをQUBO（Quadratic Unconstrained Binary Optimization）最適化により配置し、エネルギーの近いワード同士を繋げて視覚化するインタラクティブなWebアプリケーションです。

## 特徴

- **QUBO最適化**: 単語間の意味的類似度をエネルギーとして計算し、3D空間に最適配置
- **インタラクティブな3D可視化**: Plotlyによる3D球体表示、マウス操作で回転・ズーム可能
- **リアルタイム更新**: 自動更新機能により、球体が「ゆらぎ」ながら動的に変化
- **格言表示**: 入力テキストから抽出したキーワードに基づいて、関連する格言を表示
- **Excel連携**: Excelファイル（QUOTESワークシート）から格言データを読み込み可能

## 技術スタック

- **Python 3.8+**
- **Streamlit**: Webアプリケーションフレームワーク
- **Plotly**: 3D可視化
- **NumPy**: 数値計算
- **Pandas**: Excelファイル読み込み
- **Janome**: 日本語形態素解析（オプション）

## セットアップ

### 1. リポジトリのクローン

```bash
git clone <repository-url>
cd 量子神託
```

### 2. 依存関係のインストール

```bash
pip install -r requirements.txt
```

### 3. アプリケーションの起動

```bash
streamlit run app.py
```

ブラウザで `http://localhost:8501` が自動的に開きます。

## 使い方

1. **入力**: サイドバーの「今の気持ち（入力）」に短い一文を入力（例：「人との会話に疲れた。少し迷っている。」）

2. **パラメータ調整**:
   - **抽出キーワード数**: 入力テキストから抽出するキーワードの数（2-10）
   - **空間に出す単語数**: 3D空間に表示する総単語数（15-60）
   - **QUBO最適化の反復回数**: 配置計算の精度を調整（50-200）
   - **位置のゆらぎ**: 自動更新時の位置の揺れ具合
   - **エネルギー揺らぎ**: エネルギー計算のランダム性

3. **表示**:
   - 中央に核となるキーワード（赤色で表示）
   - 周囲に関連キーワードがエネルギーに基づいて配置
   - キーワード間を線で接続（色と太さはエネルギーに基づく）
   - 右上に「先人のことば」として関連格言を表示

4. **操作**:
   - **マウスドラッグ**: 3D球体を回転
   - **マウスホイール**: ズームイン/アウト
   - **左クリック**: 回転軸を変更
   - **🔄 再計算ボタン**: 手動で再計算

## Excelファイル連携

`quantum_shintaku_pack_v3_with_sense_20260213_oposite_modify_with_lr022101.xlsx` の「QUOTES」ワークシートから格言データを読み込むことができます。

Excelファイルの列名:
- 格言テキスト: `quote`, `格言`, `text`, `テキスト` など
- キーワード: `keywords`, `キーワード`, `keyword` など（カンマ区切り）
- 出所: `source`, `出所`, `出典` など
- 備考: `note`, `備考`, `notes` など

## プロジェクト構造

```
量子神託/
├── app.py              # メインアプリケーション
├── requirements.txt    # 依存関係
├── README.md          # このファイル
├── .gitignore         # Git除外設定
└── quantum_shintaku_pack_v3_with_sense_20260213_oposite_modify_with_lr022101.xlsx  # Excelデータ（オプション）
```

## ライセンス

このプロジェクトは試作版です。詳細は各ファイルのコメントを参照してください。

## 作者

量子神託 試作（福田雅彦）

## 注意事項

- このアプリケーションは試作版です
- Excelファイルは大きい場合があるため、`.gitignore`で除外することを推奨します
- 日本語の形態素解析にはJanomeを使用しますが、インストールされていない場合は簡易的なキーワード抽出にフォールバックします
